<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CodeSkulptor3 ‚Äî SimpleGUI Teaching Guide (Single‚ÄëFile HTML)</title>
  <meta name="description" content="A beginner-friendly, teaching-first guide to CodeSkulptor3 and simplegui. Pure HTML ‚Äî save and open locally."/>
  <style>
    :root{
      --bg:#fafafa;--fg:#0f1220;--muted:#60646c;--card:#ffffff;--line:#e8e8ef;
      --accent:#2563eb;--ok:#16a34a;--warn:#f59e0b;--bad:#ef4444
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
         background:linear-gradient(#fff,#fafafa);color:var(--fg)}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;z-index:10;background:rgba(255,255,255,.9);backdrop-filter:saturate(1.2) blur(8px);border-bottom:1px solid var(--line)}
    .wrap{max-width:1120px;margin:0 auto;padding:14px 22px}
    .brand{font-weight:800;letter-spacing:.2px}
    /* was 1120px */
main{
max-width:1360px; /* was 1120px */
margin:0 auto;
padding:24px;
display:grid;
grid-template-columns:280px 1fr;
gap:24px;

}

    nav a{display:block;padding:8px 12px;border-radius:10px;color:inherit}
    nav a:hover{background:#f3f4f6}
    article{line-height:1.65}
    h1{font-size:1.95rem;margin:.2rem 0 1rem}
    h2{scroll-margin-top:6rem;font-size:1.45rem;margin:2.25rem 0 .75rem}
    h3{font-size:1.1rem;margin:1.25rem 0 .5rem}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    .tip{border:1px solid rgba(22,163,74,.35);background:#ecfdf5;color:#065f46}
    .warn{border:1px solid rgba(245,158,11,.5);background:#fffbeb;color:#92400e}
    .oops{border:1px solid rgba(239,68,68,.4);background:#fef2f2;color:#7f1d1d}
    .methods > li { margin-bottom: 8px; }
    .methods ul { margin: 6px 0 10px 18px; color: #374151; font-size: .95rem; }
    .methods code { white-space: nowrap; }

    /* was 1fr 1fr */
.grid2{
display:grid;
grid-template-columns:1fr 1.33fr; /* was 1fr 1fr */
gap:16px;
}

    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:#eef2ff;border:1px solid #e5e7eb;border-radius:6px;padding:0 6px}
    pre{white-space:pre-wrap;background:#0b0b14;color:#f4f4f8;border-radius:12px;padding:12px;overflow:auto;box-shadow:inset 0 0 0 1px rgba(255,255,255,.06)}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:.92rem}
    ul,ol{padding-left:1.25rem}
    .toc{position:sticky;top:80px;height:calc(100vh - 6rem);overflow:auto;padding-right:8px}
    .callout{display:flex;gap:10px;align-items:flex-start}
    .callout .emoji{font-size:1.2rem;line-height:1.2}
    .hr{height:1px;background:var(--line);margin:18px 0}
    footer{border-top:1px solid var(--line);background:#fff;color:#666}
    .note{font-size:.92rem;color:#374151}
    .diagram{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:#f8fafc;border:1px solid #e5e7eb;border-radius:12px;padding:12px}
    @media (max-width: 600px){main{grid-template-columns:1fr} .toc{position:static;height:auto}}
    /* Wider page + wider right-hand column */
@media (min-width: 980px){
  main{ max-width: 1360px; }               /* was 1120px */
  .grid2{ grid-template-columns: 1fr 1.5fr; }  /* was 1fr 1fr */
}

/* Keep code comfy */
pre{ white-space: pre; overflow:auto; }      /* no wrapping; allow horizontal scroll */
pre code{ font-size: .98rem; }               /* optional: slightly larger code */
/* Limit line length for explanatory text */
.measure{ max-width: 68ch; }     /* ~68 characters */
.measure-wide{ max-width: 80ch; }/* optional, a bit wider */

  </style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;align-items:center;gap:16px">
      <div class="brand">CodeSkulptor3 ‚Äî SimpleGUI Teaching Guide</div>
      <div style="margin-left:auto;display:flex;gap:16px;font-size:.95rem">
        <a href="#quickstart">Quick Start</a>
        <a href="#frames">Frames</a>
        <a href="#events">Events</a>
        <a href="#projects">Projects</a>
        <a href="#faq">FAQ</a>
      </div>
    </div>
  </header>

  <main>
    <aside class="toc">
      <nav>
        <a href="#welcome">Welcome</a>
        <a href="#goals">Learning Goals</a>
        <a href="#quickstart">Quick Start (5 min)</a>
        <a href="#mental-model">Mental Model: Event‚ÄëDriven</a>
        <a href="#glossary">Glossary</a>
        <a href="#frames" title="create_frame, controls, canvas">Frames</a>
        <a href="#canvas" title="text, shapes, images">Canvas Drawing</a>
        <a href="#keyboard">Keyboard</a>
        <a href="#mouse">Mouse</a>
        <a href="#timers">Timers</a>
        <a href="#sound">Sound</a>
        <a href="#images">Images & Sprites</a>
        <a href="#state">Game State Patterns</a>
        <a href="#labs">Guided Labs</a>
        <a href="#projects">Mini‚ÄëProjects</a>
        <a href="#troubleshoot">Troubleshooting</a>
        <a href="#reference">Reference API</a>
        <a href="#faq">FAQ</a>
      </nav>
    </aside>

    <article>
      <h2 id="welcome">Welcome</h2>
      <p>This page is a <em>teaching‚Äëfirst</em> introduction to <strong>CodeSkulptor3</strong> (CS3) and its <code>simplegui</code> library. It explains each idea before showing code, then leads you through guided labs and small projects.</p>

      <h2 id="goals">Learning Goals</h2>
      <ul>
        <li>Understand what a <strong>frame</strong> is and how handlers connect to it.</li>
        <li>Use the <strong>canvas</strong> to draw text, shapes, images, and show state.</li>
        <li>Handle <strong>keyboard</strong> and <strong>mouse</strong> events to change state.</li>
        <li>Use <strong>timers</strong> for predictable game updates.</li>
        <li>Load <strong>images</strong> and <strong>sounds</strong> from HTTPS URLs.</li>
        <li>Apply a clean <strong>state update ‚Üí draw</strong> pattern.</li>
      </ul>

      <h2 id="quickstart">Quick Start (5 min)</h2>
      <div class="callout tip"><div class="emoji">üí°</div><div>In CS3 you don‚Äôt call <code>draw()</code> yourself. You <em>register</em> it, and the system calls it every frame.</div></div>
      <pre><code>import simplegui

def draw(canvas):
    canvas.draw_text("Hello, CS3!", (40, 120), 28, "White")

frame = simplegui.create_frame("Hello", 320, 240)
frame.set_draw_handler(draw)
frame.start()</code></pre>
      <div class="note">Try changing the text or the coordinates and re‚Äërunning.</div>

      <h2 id="mental-model">Mental Model: Event‚ÄëDriven</h2>
      <div class="diagram"><pre>Keyboard/Mouse/Timer  ‚îÄ‚îê
                        ‚îú‚îÄ‚ñ∫ Your handler updates STATE
Graphics frame clock  ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚ñº
  draw(canvas) reads STATE and renders the scene</pre></div>
      <p>Think of the program as a little world with <strong>state</strong> (positions, score, switches). Events change the state; the draw handler <em>reads</em> the state and paints the scene.</p>

      <h2 id="glossary">Glossary (beginner‚Äëfriendly)</h2>
      <ul>
        <li><strong>Frame</strong>: The application window created by <code>create_frame</code>. It manages the canvas and events.</li>
        <li><strong>Canvas</strong>: The drawing surface passed into <code>draw(canvas)</code>.</li>
        <li><strong>Handler</strong>: A function you write that responds to an event (e.g., <code>keydown</code>).</li>
        <li><strong>Timer</strong>: A ticking event you create that calls a function on a fixed schedule.</li>
        <li><strong>State</strong>: Variables that remember ‚Äúwhat‚Äôs going on‚Äù (position, score, flags).</li>
      </ul>

      <div class="hr"></div>
      <section id="frames">
      <h2 id="frames">Frames</h2>
      <p class="measure">
  A <strong>frame</strong> is the main window that contains everything your program shows and controls.
  When you create a frame, you are essentially opening a little app window where your canvas lives,
  your buttons and labels sit on the side, and your event loop runs in the background.
</p>

<p class="measure">
  You use the frame to <em>register handlers</em> ‚Äî the functions that respond to user actions or time passing.
  For example, you attach a <code>draw(canvas)</code> handler to repaint the scene,
  <code>keydown</code> and <code>keyup</code> handlers for keyboard input,
  <code>mouseclick</code> and <code>mousedrag</code> handlers for the mouse,
  and timers that update game logic behind the scenes.
</p>

<p class="measure">
  When you call <code>frame.start()</code>, CodeSkulptor begins the <strong>event loop</strong>:
  it continuously listens for input, calls your registered functions at the right moments,
  and repaints the canvas roughly sixty times per second.
  This is what makes your program feel ‚Äúalive‚Äù ‚Äî a steady rhythm where the frame handles
  time, input, and drawing, while your handlers decide what happens each step.
</p>

<p class="measure">
  In short: the frame is your program‚Äôs <em>engine room</em>.
  You build it, connect your control panels (handlers) to it, and then start it running.
  From that point on, CodeSkulptor keeps calling your functions ‚Äî you never call them yourself.
</p>

  <div class="diagram"><pre>
    create_frame() ‚Üí register handlers ‚Üí frame.start()
         ‚îÇ                 ‚îÇ
         ‚îú‚îÄ‚îÄ‚Üí draw() ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  (~60√ó/sec)
         ‚îú‚îÄ‚îÄ‚Üí timer()      ‚îú‚îÄ‚îÄ‚Üí input events

  </pre></div>
      <div class="grid2">
        <div class="card">
  <h3>Essential methods</h3>
  <h5>Note: <code>fn</code> is a function you write and then register with these methods.</h5>
  <ul class="methods">
    <li>
      <code>simplegui.create_frame(title, width, height)</code> returns a <em>Frame</em>
      <ul>
        <li><strong>title</strong>: string shown in the window title bar.</li>
        <li><strong>width</strong>, <strong>height</strong>: canvas size in pixels.</li>
        <li><strong>returns</strong>: a <em>Frame</em> object you use to register handlers and UI controls.</li>
        <li><strong> Usage </strong>: <code>frame = simplegui.create_frame("Frame demo", 400, 220)</code> </li>
      </ul>
    </li>

    <li>
  <code>frame.set_draw_handler(fn)</code>
  <ul>
    <li><strong>fn(canvas)</strong>: called ~60√ó/sec. Render using the canvas methods below.</li>
    <li><strong>Note</strong>: <code>draw(canvas)</code> should only read and display the current state (such as positions or colors). Do not update or change game variables inside <code> draw()</code>‚Äîkeep all logic in timers or input handlers. Otherwise, animation and movement will depend on the frame rate rather than the timer clock, causing them to slow down or drift out of sync.</li>

    <li><strong>Canvas draw functions (cheat sheet)</strong>
      <ul>
        <li>
          <code>canvas.draw_text(text, pos, font_size, color, font=&quot;monospace&quot;)</code>
          <ul>
            <li><em>text</em>: string; <em>pos</em>: (x,y) baseline-left; <em>font_size</em>: px; <em>color</em>: CSS color.</li>
            <li>Example: <code>canvas.draw_text(&quot;Score: 10&quot;, (16, 32), 20, &quot;White&quot;)</code></li>
          </ul>
        </li>

        <li>
          <code>canvas.draw_line(p1, p2, line_width, color)</code>
          <ul>
            <li><em>p1</em>, <em>p2</em>: (x,y) endpoints; <em>line_width</em>: px stroke width.</li>
            <li>Example: <code>canvas.draw_line((20, 80), (220, 80), 3, &quot;#60a5fa&quot;)</code></li>
          </ul>
        </li>

        <li>
          <code>canvas.draw_circle(center, radius, line_width, line_color, fill_color=None)</code>
          <ul>
            <li>Stroke + optional fill; omit <em>fill_color</em> for outline only.</li>
            <li>Example: <code>canvas.draw_circle((200,150), 30, 2, &quot;White&quot;, &quot;Aqua&quot;)</code></li>
          </ul>
        </li>

        <li>
          <code>canvas.draw_polygon(points, line_width, line_color, fill_color=None)</code>
          <ul>
            <li><em>points</em>: list of (x,y); auto-closes shape; use for triangles, rectangles, etc.</li>
            <li>Example: <code>canvas.draw_polygon([(100,100),(180,100),(180,160),(100,160)], 2, &quot;#f59e0b&quot;, &quot;#111827&quot;)</code></li>
          </ul>
        </li>

        <li>
          <code>canvas.draw_polyline(points, line_width, color)</code>
          <ul>
            <li>Open path (not closed). Great for trails, scribbles, graphs.</li>
            <li>Example: <code>canvas.draw_polyline([(20,220),(60,180),(120,210)], 3, &quot;#22c55e&quot;)</code></li>
          </ul>
        </li>

        <li>
          <code>canvas.draw_image(image, src_center, src_size, dst_center, dst_size, rotation=0.0)</code>
          <ul>
            <li><em>image</em>: from <code>simplegui.load_image(url)</code>.</li>
            <li><em>src_center</em>/<em>src_size</em>: crop region in the image‚Äôs intrinsic coords.</li>
            <li><em>dst_center</em>/<em>dst_size</em>: where/size on canvas; <em>rotation</em> in radians.</li>
            <li>Example (full image sprite):<br>
              <code>
                img = simplegui.load_image(URL)<br>
                canvas.draw_image(img, (512,512), (1024,1024), (200,120), (96,96), angle)
              </code>
            </li>
            <li><strong>Gotcha</strong>: use correct intrinsic center/size; URL must be HTTPS and publicly reachable.</li>
          </ul>
        </li>

        <li>
          <strong>Coordinates &amp; units</strong>
          <ul>
            <li>Origin is top-left; +x right, +y down. All sizes/widths are in pixels.</li>
            <li>Stay within your frame size <code>(0..width, 0..height)</code> unless you want clipping.</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</li>


    <li>
      <code>frame.set_keydown_handler(fn)</code>, <code>frame.set_keyup_handler(fn)</code>
      <ul>
        <li><strong>fn(key)</strong>: receives an integer key code. Use <code>simplegui.KEY_MAP['left']</code> etc.</li>
        <li><strong>Pattern</strong>: change velocity/flags on keydown; clear them on keyup.</li>
      </ul>
    </li>

    <li>
      <code>frame.set_mouseclick_handler(fn)</code>, <code>frame.set_mousedrag_handler(fn)</code>
      <ul>
        <li><strong>fn(pos)</strong>: <code>pos</code> is a tuple <code>(x, y)</code> in canvas coordinates.</li>
        <li><strong>click</strong>: fires on mouse press. <strong>drag</strong>: fires repeatedly while moving pressed.</li>
      </ul>
    </li>

    <li>
      <code>frame.add_button(label, handler, width=100)</code>
      <ul>
        <li><strong>label</strong>: button text. <strong>handler()</strong>: no parameters.</li>
        <li><strong>returns</strong>: a Button control (rarely stored).</li>
      </ul>
    </li>

    <li>
      <code>frame.add_label(text, width=150)</code>
      <ul>
        <li><strong>text</strong>: initial text.</li>
        <li><strong>returns</strong>: a Label object; later call <code>label.set_text(str)</code> to update.</li>
      </ul>
    </li>

    <li>
      <code>frame.add_input(prompt, handler, width=150)</code>
      <ul>
        <li><strong>prompt</strong>: hint text shown next to the input field.</li>
        <li><strong>handler(text)</strong>: called when user submits; <code>text</code> is a string.</li>
        <li><strong>Note</strong>: Some hosts swallow spacebar; let students type <code>_</code> and convert to space.</li>
      </ul>
    </li>

    <li>
      <code>frame.set_canvas_background(color)</code> <em>(if supported)</em>
      <ul>
        <li><strong>color</strong>: CSS color string (e.g., <code>"#111827"</code>, <code>"Aqua"</code>).</li>
        <li><strong>Note</strong>: Not available on all CS3 deployments; harmless to call if present.</li>
      </ul>
    </li>

    <li>
      <code>frame.start()</code>, <code>frame.stop()</code>
      <ul>
        <li><strong>start()</strong>: begins the event loop (draw, timers, input callbacks start firing).</li>
        <li><strong>stop()</strong>: halts the loop and closes timers/sounds; you can <code>start()</code> again.</li>
      </ul>
    </li>
  </ul>
</div>

        <div>
          <h3>Example</h3>
          <pre><code>


            import simplegui

def draw(canvas):
    canvas.draw_text("Hello, CS3!", (40, 120), 28, "White")

frame = simplegui.create_frame("Hello", 320, 240)
frame.set_draw_handler(draw)
frame.start()`;

    
      const textEntry = `# --- Text Entry Pattern A: normalize underscores to spaces ---
# This example shows: global state, draw handler reads 
#state, button handler updates state,
# input handler normalizes spaces, and both 
#canvas + label reflect changes.

import simplegui

# Program STATE lives outside handlers 
# so all handlers can share it.

# numeric state (e.g., a score or counter)
count = 0 
# latest user-entered text (what we'll render on the canvas)               
rendered_text = ""        
# The DRAW handler: CS3 calls this ~60x/sec 
# and passes in a CANVAS you draw on.
def draw(c):
    # Draw the current count inside the canvas area 
    #      (the game world / scene)
    c.draw_text(f"Count: {count}", (20, 50), 28, "White")
    # Draw the latest text the user entered; 
    # we display it in pink to distinguish it
    c.draw_text(f"You entered: {rendered_text}", (20, 100), 28, "Pink")

# A BUTTON handler: runs once 
# when the sidebar "+1" button is clicked.
def bump():
    global count
    count += 1                 # mutate state
    # also update the sidebar label (UI chrome)
    label.set_text(f"Count: {count}")  

# INPUT handler: fires when the user submits 
# text in the sidebar Input control.
# NOTE: On some hosts, spacebar may not reach the 
# input; we let students type '_' and convert it.
def on_text(txt):
    global rendered_text
    # Treat underscore as space so students can 
    # type phrases even if space is swallowed
    txt = txt.replace("_", " ")
     # appears in the console area under the editor
    print("You typed:", txt)  
     # update state; next draw() will render the new text
    rendered_text = txt        

# --- Wiring up the FRAME and controls ---
frame = simplegui.create_frame("Frame demo", 400, 220)  # (title, width, height)
# register draw handler (no parentheses!)
frame.set_draw_handler(draw)  
 # sidebar button ‚Üí bump()                           
frame.add_button("+1", bump, 60)   
# keep a handle to the label so we can set_text()                     
label = frame.add_label("Count: 0", 120)        
# sidebar input ‚Üí on_text(txt)         
frame.add_input("Type:", on_text, 150)
 # set canvas background color                   
frame.set_canvas_background("#203040")                  

# Important: start the event loop LAST, 
# after all handlers/controls exist.
frame.start()


</code></pre>
        </div>
      </div>
  </section>

      <h2 id="canvas">Canvas Drawing</h2>
      <p>Draw using the <code>canvas</code> passed into your draw handler. The coordinate origin is top‚Äëleft; <code>y</code> grows downward.</p>
      <div class="grid2">
        <div class="card">
          <h3>Common calls</h3>
          <ul>
            <li><code>canvas.draw_text(text, (x,y), size, color, font='serif')</code></li>
            <li><code>canvas.draw_line(p1, p2, width, color)</code></li>
            <li><code>canvas.draw_circle(center, r, width, line_color, fill_color=None)</code></li>
            <li><code>canvas.draw_polygon(points, width, line_color, fill_color=None)</code></li>
            <li><code>canvas.draw_polyline(points, width, color)</code></li>
            <li><code>canvas.draw_image(img, src_center, src_size, dst_center, dst_size, rot=0)</code></li>
          </ul>
        </div>
        <div>
<pre><code>
    # this will draw shapes, replace the default draw in 
    # codeskultor3 with this draw function
    def draw(c):
      c.draw_text("Shapes:", (20, 40), 24, "Aqua", "monospace")
      c.draw_line((20,70), (200,70), 3, "#ff88aa")
      c.draw_circle((120,120), 30, 2, "white", "#305080")
      c.draw_polygon([(220,90),(260,130),(220,170),(180,130)], 2, "orange", "#663300")</code></pre>
        </div>
      </div>

      <h2 id="keyboard">Keyboard</h2>
      <p>Register key handlers on the frame. Use <code>simplegui.KEY_MAP</code> (e.g., <code>'left'</code>, <code>'a'</code>, <code>'0'</code>, <code>'space'</code>).</p>


<h3> Short example using keyboard </h3>
<pre><code>import simplegui

vel = [0,0]

def keydown(k):
    if k == simplegui.KEY_MAP['left']:  vel[0] = -4
    if k == simplegui.KEY_MAP['right']: vel[0] =  4
    if k == simplegui.KEY_MAP['up']:    vel[1] = -4
    if k == simplegui.KEY_MAP['down']:  vel[1] =  4

def keyup(k):
    if k in (simplegui.KEY_MAP['left'], simplegui.KEY_MAP['right']): vel[0] = 0
    if k in (simplegui.KEY_MAP['up'], simplegui.KEY_MAP['down']):    vel[1] = 0

f = simplegui.create_frame("Keys", 320, 200)
f.set_keydown_handler(keydown)
f.set_keyup_handler(keyup)
f.start()</code></pre>

<h3> Longer example using keyboard </h3>
<pre><code>



# ------------------------------------------------------------
# Keyboard Move + Wall Reverse (No Wrap)
# ------------------------------------------------------------
# What this does:
# - A ball moves with velocity set by arrow keys.
# - When it hits a wall, it stays inside and flips direction
#   by reversing the velocity on that axis.
# - Position is clamped to keep the ball within bounds.
#
# Teaching goals:
# - Separate state (pos, vel) from rendering (draw).
# - Show keyboard handlers change velocity, not position.
# - Show collision handling: clamp + reverse velocity.
#
# Controls:
# - ‚Üê ‚Üí change vel[0] to -4 / +4
# - ‚Üë ‚Üì change vel[1] to -4 / +4
# - Releasing a key sets that axis velocity back to 0.
#
# Tips:
# - Click the canvas so it has focus before using keys.
# - On some Macs, WASD can be more reliable than arrows.
#   (Swap KEY_MAP entries if needed.)
# ------------------------------------------------------------

import simplegui

WIDTH, HEIGHT = 620, 400
R = 20                         # ball radius (used for wall tests)
pos = [WIDTH // 2, HEIGHT // 2]
vel = [0, 0]

def draw(c):
    # --- advance position by current velocity ---
    pos[0] += vel[0]
    pos[1] += vel[1]

    # --- X walls: clamp inside and reverse vel[0] if crossed ---
    if pos[0] < R:
        pos[0] = R
        vel[0] = -vel[0]
    elif pos[0] > WIDTH - R:
        pos[0] = WIDTH - R
        vel[0] = -vel[0]

    # --- Y walls: clamp inside and reverse vel[1] if crossed ---
    if pos[1] < R:
        pos[1] = R
        vel[1] = -vel[1]
    elif pos[1] > HEIGHT - R:
        pos[1] = HEIGHT - R
        vel[1] = -vel[1]

    # --- render ---
    c.draw_circle(pos, R, 10, "#fb5607", "#ff006e")
    c.draw_text(f"vel={vel}", (10, 24), 16, "White")

def keydown(k):
    # Set velocity on press (position changes in draw)
    if k == simplegui.KEY_MAP['left']:
        vel[0] = -4
    if k == simplegui.KEY_MAP['right']:
        vel[0] = 4
    if k == simplegui.KEY_MAP['up']:
        vel[1] = -4
    if k == simplegui.KEY_MAP['down']:
        vel[1] = 4

def keyup(k):
    # Stop velocity on that axis when key is released
    if k in (simplegui.KEY_MAP['left'], simplegui.KEY_MAP['right']):
        vel[0] = 0
    if k in (simplegui.KEY_MAP['up'], simplegui.KEY_MAP['down']):
        vel[1] = 0

# --- Frame wiring ---
f = simplegui.create_frame("Keys", WIDTH, HEIGHT)
f.set_draw_handler(draw)
f.set_keydown_handler(keydown)
f.set_keyup_handler(keyup)
f.start()




</code></pre>




      <h2 id="mouse">Mouse</h2>
      <p><code>mouseclick</code> is a ‚Äúonce‚Äù event; <code>mousedrag</code> fires while pressed and moving.</p>

<h3> Code excerpt to see how mouse and mouse events are used </h3>
<pre><code>points = []

def click(pos):  points.append(pos)
def drag(pos):   points.append(pos)

frame.set_mouseclick_handler(click)
frame.set_mousedrag_handler(drag)</code></pre>

<h3> Longer example demonstrating mouse, and receiving mouse events </h3>
<pre><code>

 # ------------------------------------------------------------
# Mouse Draw ‚Äî Persistent Rainbow Strokes (no mouse-up needed)
# What this does:
# - Lets you draw colorful strokes with the mouse.
# - A new stroke starts on each click and is saved immediately.
# - Dragging appends points to the newest stroke as you move.
# - Press the "Clear" button to reset all strokes.
#
# Why this pattern:
# - Some CS3 hosts do not provide a mouse-up event reliably.
# - By saving every point straight to a strokes list, drawings
#   persist even after you release the mouse.
#
# Teaching goals:
# - Model data as a list of strokes, where each stroke is a list
#   of (x, y) points paired with a color.
# - Separate state (strokes) from rendering (draw handler).
# - Show how handlers (click, drag) mutate state safely.
#
# Controls and usage:
# - Click to begin a stroke (gets the next rainbow color).
# - Drag to continue that stroke.
# - Click again to start a new stroke (color cycles).
# - Use the "Clear" button to wipe the canvas.
#
# Notes:
# - Keep comments short so they fit narrow code panes; break long
#   explanations across multiple lines with leading "#".
# - The palette below uses bright "neon" colors that pop against
#   a dark background.
# ------------------------------------------------------------

import simplegui

WIDTH, HEIGHT = 640, 360
thickness = 3

# Each stroke is stored as a tuple: (points_list, color_string).
# points_list is a list of (x, y) tuples from clicks and drags.
strokes = []

# Vibrant rainbow palette; we cycle one color per new stroke.
palette = [
    "#FF006E", "#FB5607", "#FFBE0B", "#3A86FF",
    "#00F5D4", "#8338EC", "#F72585", "#06D6A0",
    "#FFD60A", "#7BFF00", "#00E5FF", "#FF1493"
]
color_idx = 0

def next_color():
    # Return next palette color and advance the index.
    global color_idx
    c = palette[color_idx % len(palette)]
    color_idx += 1
    return c

def draw(c):
    # Render all saved strokes. For single-point strokes (just a
    # click without drag) draw a tiny dot so clicks are visible.
    for pts, col in strokes:
        if len(pts) >= 2:
            c.draw_polyline(pts, thickness, col)
        elif len(pts) == 1:
            c.draw_circle(pts[0], 1, thickness, col)

    # HUD with running totals for quick feedback while drawing.
    total = sum(len(pts) for pts, _ in strokes)
    c.draw_text("strokes={}  points={}".format(len(strokes), total),
                (12, 26), 16, "White")

def click(pos):
    # Start a new stroke on every mouse click. We immediately
    # persist the first point so nothing can be lost if mouse-up
    # is not delivered by the host environment.
    strokes.append(([pos], next_color()))

def drag(pos):
    # While dragging, append the current mouse position to the
    # most recent stroke so the line follows the cursor.
    if strokes:
        strokes[-1][0].append(pos)

def clear():
    # Reset all strokes; leave thickness and palette alone.
    strokes[:] = []

# Frame wiring.
frame = simplegui.create_frame("Mouse Draw ‚Äî Rainbow (persistent)",
                               WIDTH, HEIGHT)
frame.set_draw_handler(draw)
frame.set_mouseclick_handler(click)
frame.set_mousedrag_handler(drag)
frame.add_button("Clear", clear, 70)
frame.set_canvas_background("#111827")  # deep navy for color pop
frame.start()




</code></pre>

      <h2 id="timers">Timers</h2>
      <p>Timers are ideal for physics, AI, or score updates that should not depend on frame rate.</p>
<pre><code>import simplegui

ticks = 0
def tick():
    global ticks
    ticks += 1

t = simplegui.create_timer(100, tick)  # 10 times per second
t.start()</code></pre>

  <p>Here is an example of 3 balls moving with the timer.</p>

<pre><code>

# ------------------------------------------------------------
# Bouncing Balls ‚Äî Timer-driven motion (teach timers + physics)
# ------------------------------------------------------------
# What this does:
# - Draws 3 balls and moves them using a timer callback.
# - On wall contact, we CLAMP position and REVERSE velocity,
#   so balls stay inside bounds and never get "stuck".
#
# 1) How timers work (CS3):
# - create_timer(ms, fn) schedules fn every ms milliseconds.
# - Each call to fn runs to completion before the next call.
# - Example: ms = 30 ‚Üí ~33 calls per second.
# - Timers are independent of draw(); you can pause with stop().
#
# 2) Event loop timeline (simplified):
#   time ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
#     draw()   draw()   draw()   draw()   draw()   # ~60√ó/sec repaint
#        ‚Üë         ‚Üë         ‚Üë
#        ‚îÇ         ‚îÇ         ‚îÇ
#       tick()    tick()    tick()                 # timer calls (e.g., 30 ms)
#
# Teaching goals:
# - Separate "update rate" (timer) from "render rate" (draw).
# - Model each ball as a dict with pos, vel, color.
# - Show clamp + reverse pattern for robust wall bounces.
#
# Tips:
# - Keep initial positions inside [R, W-R] √ó [R, H-R].
# - Change the timer interval to see motion speed change.
# - Try adding a 4th ball with a random color and velocity.
# ------------------------------------------------------------

import simplegui, random

WIDTH, HEIGHT = 400, 300
R = 15

# Each ball has a position [x, y], a velocity [vx, vy], and a color.
balls = [
    {"pos": [200, 150], "vel": [ 2, -3], "color": "#e85d04"},
    {"pos": [100,  80], "vel": [-3,  2], "color": "#ffba08"},
    {"pos": [ 30,  30], "vel": [-1,  5], "color": "#06d6a0"}  # inside bounds (>= R)
]

def draw(c):
    # Render all balls at their current positions.
    for b in balls:
        c.draw_circle(b["pos"], R, 2, b["color"], b["color"])

def tick():
    # Timer callback: advance physics at a fixed cadence.
    for b in balls:
        p, v = b["pos"], b["vel"]

        # 1) integrate position by velocity (Euler step)
        p[0] += v[0]
        p[1] += v[1]

        # 2) collide with vertical walls: clamp then reverse vx
        if p[0] < R:
            p[0] = R
            v[0] = -v[0]
        elif p[0] > WIDTH - R:
            p[0] = WIDTH - R
            v[0] = -v[0]

        # 3) collide with horizontal walls: clamp then reverse vy
        if p[1] < R:
            p[1] = R
            v[1] = -v[1]
        elif p[1] > HEIGHT - R:
            p[1] = HEIGHT - R
            v[1] = -v[1]

# Frame + wiring
frame = simplegui.create_frame("Timer Animation", WIDTH, HEIGHT)
frame.set_draw_handler(draw)

# Run physics at ~33 Hz (every 30 ms). Independent of draw() fps.
simplegui.create_timer(30, tick).start()

frame.start()


</code></pre>

      <h2 id="sound">Sound</h2>
      <div class="callout warn"><div class="emoji">üîä</div><div>Use HTTPS URLs. Many browsers block autoplay unless triggered by a user action (e.g., key press).</div></div>
<pre><code>jump = simplegui.load_sound("https://commondatastorage.googleapis.com/codeskulptor-assets/jump.ogg")

def keydown(k):
    if k == simplegui.KEY_MAP['space']:
        jump.rewind(); jump.play()</code></pre>

      <h2 id="images">Images & Sprites</h2>
      <div class="callout warn"><div class="emoji">üñºÔ∏è</div><div>You must provide the image‚Äôs intrinsic <em>source center</em> and <em>source size</em> when drawing.</div></div>
<pre><code>

        import simplegui

        #load image 
        URL = "https://ik.imagekit.io/storybird/images/82f0c2c8-947b-4373-875a-ab56d92d5be2/12_742601693.webp?tr=q-80"
        img = simplegui.load_image(URL)

        SRC_W, SRC_H = 856, 856
        SRC_CENTER = (SRC_W/2, SRC_H/2) # center of image
        SRC_SIZE   = (SRC_W, SRC_H) # size of image loaded (look at inspector)
        DST_CENTER = (450, 450)  # location of plaecement on frame
        DST_SIZE   = (SRC_W, SRC_H) # scale : use SRC_SIZE coords, multiply or divide 

        angle = 0.0
        do_rotate = False  # start stopped

        def draw(c): # draws image at the correct image size 
            global angle, DST_CENTER, DST_SIZE
                   
            c.draw_image(img, SRC_CENTER, SRC_SIZE, DST_CENTER, DST_SIZE)
            


        frame = simplegui.create_frame("Load Image", 900, 900)
        frame.set_draw_handler(draw)
        frame.set_canvas_background("#0b1a2b")

        frame.start()


     </code></pre>

      <h2 id="state">Game State Patterns</h2>
      <ul>
        <li>Create a <code>new_game()</code> function that resets all state in one place.</li>
        <li>Update state in timers or at the top of <code>draw</code>, then render.</li>
        <li>Keep global state minimal and well‚Äënamed (e.g., <code>player_pos</code>, <code>score</code>).</li>
      </ul>

      <div class="hr"></div>

      <h2 id="labs">Guided Labs</h2>

      <h3>Lab 1 ‚Äî Draw & Text (15‚Äì20 min)</h3>
      <ol>
        <li>Create a frame (400√ó220). Set a draw handler.</li>
        <li>Draw the message ‚ÄúWelcome to CS3‚Äù at (20,100) with size 28 and color ‚ÄúWhite‚Äù.</li>
        <li>Change the message and re‚Äërun. Observe the effect.</li>
      </ol>
      <div class="note">Goal: learn where drawing code lives and how to position text.</div>

      <h3>Lab 2 ‚Äî Keyboard Move (25‚Äì30 min)</h3>
      <ol>
        <li>Keep a <code>player</code> list like <code>[x,y]</code> and <code>vel</code> like <code>[vx,vy]</code>.</li>
        <li>In <code>keydown</code>/<code>keyup</code>, update <code>vel</code>. In <code>draw</code>, add <code>vel</code> to <code>player</code>.</li>
        <li>Wrap at edges using modulo with width/height.</li>
      </ol>
      <div class="note">Goal: connect inputs ‚Üí state change ‚Üí visible movement.</div>

      <h3>Lab 3 ‚Äî Timer Tick (20‚Äì25 min)</h3>
      <ol>
        <li>Create a <code>tick()</code> that increments <code>ticks</code>.</li>
        <li>Start a timer at 10 Hz. Show <code>ticks</code> on the canvas.</li>
        <li>Pause/resume with a button that calls <code>timer.start()</code>/<code>timer.stop()</code>.</li>
      </ol>

      <h3>Lab 4 ‚Äî Sprite & Rotation (25‚Äì30 min)</h3>
      <ol>
        <li>Load the Python logo (URL above). Use correct <code>SRC_CENTER</code>/<code>SRC_SIZE</code>.</li>
        <li>Rotate a small copy around its center by increasing <code>angle</code>.</li>
        <li>Add a key to make it spin faster/slower.</li>
      </ol>

      <div class="hr"></div>

      <h2 id="projects">Mini‚ÄëProjects (apply everything)</h2>
      <ol>
        <li><strong>Bouncing Ball</strong> ‚Äî Use gravity and a small bounce factor; stop when speed is tiny.</li>
        <li><strong>Pong Lite</strong> ‚Äî Two paddles, arrow/W‚ÄëS keys, score to 5, a Reset button.</li>
        <li><strong>Type Racer</strong> ‚Äî Show a target string; compute WPM and accuracy.</li>
        <li><strong>Sprite Sheet Viewer</strong> ‚Äî Left/right scrubs frames; space toggles play.</li>
      </ol>

      <h2 id="troubleshoot">Troubleshooting</h2>
      <div class="card oops">
        <strong>Image won‚Äôt show.</strong>
        <ul>
          <li>Use <strong>HTTPS</strong> URLs that are publicly accessible.</li>
          <li>Provide correct <code>SRC_CENTER</code> and <code>SRC_SIZE</code> to <code>draw_image</code>.</li>
        </ul>
      </div>
      <div class="card oops" style="margin-top:12px">
        <strong>No sound.</strong>
        <ul>
          <li>Play on a user event (e.g., in <code>keydown</code>). Browsers block autoplay.</li>
          <li>Use <code>sound.rewind(); sound.play()</code> to retrigger short SFX.</li>
        </ul>
      </div>
      <div class="card oops" style="margin-top:12px">
        <strong>Keyboard not responding.</strong>
        <ul>
          <li>Click the canvas window first to focus it.</li>
          <li>Verify key names in <code>simplegui.KEY_MAP</code> (e.g., <code>'space'</code>, <code>'left'</code>).</li>
        </ul>
      </div>

      <h2 id="reference">Reference API (concise)</h2>
      <div class="grid2">
        <div class="card">
          <h3>Module</h3>
          <ul>
            <li><code>simplegui.create_frame(title, w, h)</code> ‚Üí Frame</li>
            <li><code>simplegui.create_timer(ms, handler)</code> ‚Üí Timer</li>
            <li><code>simplegui.load_image(url)</code> ‚Üí Image</li>
            <li><code>simplegui.load_sound(url)</code> ‚Üí Sound</li>
            <li><code>simplegui.KEY_MAP</code> ‚Üí dict of keys</li>
          </ul>
          <h3>Timer</h3>
          <ul>
            <li><code>timer.start()</code>, <code>timer.stop()</code></li>
          </ul>
          <h3>Sound</h3>
          <ul>
            <li><code>s.play()</code>, <code>s.pause()</code>, <code>s.rewind()</code>, <code>s.set_volume(0..1)</code></li>
          </ul>
        </div>
        <div class="card">
          <h3>Frame</h3>
          <ul>
            <li><code>set_draw_handler(fn)</code></li>
            <li><code>set_keydown_handler(fn)</code>, <code>set_keyup_handler(fn)</code></li>
            <li><code>set_mouseclick_handler(fn)</code>, <code>set_mousedrag_handler(fn)</code></li>
            <li><code>add_button(label, handler, width=100)</code> ‚Üí Button</li>
            <li><code>add_label(text, width=150)</code> ‚Üí Label (<code>label.set_text</code>)</li>
            <li><code>add_input(prompt, handler, width=150)</code> ‚Üí Input</li>
            <li><code>set_canvas_background(color)</code> (if available)</li>
            <li><code>start()</code>, <code>stop()</code></li>
          </ul>
          <h3>Canvas</h3>
          <ul>
            <li><code>draw_text(text, (x,y), size, color, font='serif')</code></li>
            <li><code>draw_line(p1, p2, width, color)</code></li>
            <li><code>draw_circle(center, r, width, line_color, fill_color=None)</code></li>
            <li><code>draw_polygon(points, width, line_color, fill_color=None)</code></li>
            <li><code>draw_polyline(points, width, color)</code></li>
            <li><code>draw_image(img, src_center, src_size, dst_center, dst_size, rot=0)</code></li>
          </ul>
        </div>
      </div>

      <h2 id="faq">FAQ</h2>
      <p><strong>Do I need imports besides <code>simplegui</code>?</strong><br/>Stick to built‚Äëins and the modules provided in your CS3 host.</p>
      <p><strong>Where do I save images?</strong><br/>Use public HTTPS URLs (e.g., Wikimedia). Keep a list of asset URLs in a comment at the top of your program.</p>
      <p><strong>How do I submit to Canvas?</strong><br/>Download your <code>.py</code> file and include any resource list; share a link if your host provides one.</p>

      <div class="hr"></div>
      <p class="note">This file is pure HTML/CSS only. Save as <span class="kbd">.html</span> and open locally. No React, no external CDNs.</p>
    </article>
  </main>

  <footer>
    <div class="wrap" style="font-size:.95rem">¬© <span id="year"></span> CS3 Guide ‚Ä¢ Teaching-first edition.</div>
  </footer>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
